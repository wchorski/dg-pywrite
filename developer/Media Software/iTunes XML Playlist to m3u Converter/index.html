<!DOCTYPE html>
<html lang="en">
  <head>
    <title>iTunes XML Playlist to m3u Converter</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://fastly.jsdelivr.net/npm/mermaid@9.4.0/dist/mermaid.min.js"></script>
<script>
    mermaid.initialize({
        startOnLoad: true,
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js" integrity="sha512-hpZ5pDCF2bRCweL5WoA0/N1elet1KYL5mx3LP555Eg/0ZguaHawxNvEjF6O3rufAChs16HVNhEc6blF/rZoowQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha512-sv0slik/5O0JIPdLBCR2A3XDg/1U3WuDEheZfI/DI5n8Yqc3h5kjrnr46FGBNiUAJF7rE4LHKwQ/SoSLRKAxEA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdn.jsdelivr.net/npm/lucide@0.115.0/dist/umd/lucide.min.js"></script>
<script>
    // Create callout icons
    window.addEventListener("load", () => {
        document.querySelectorAll(".callout").forEach((elem) => {
            const icon = getComputedStyle(elem).getPropertyValue('--callout-icon');
            const iconName = icon && icon.trim().replace(/^lucide-/, "");

            if (iconName) {
                const calloutTitle = elem.querySelector(".callout-title");

                if (calloutTitle) {
                    const calloutIconContainer = document.createElement("div");
                    const calloutIcon = document.createElement("i");

                    calloutIconContainer.appendChild(calloutIcon);
                    calloutIcon.setAttribute("icon-name", iconName);
                    calloutIconContainer.setAttribute("class", "callout-icon");
                    calloutTitle.insertBefore(calloutIconContainer, calloutTitle.firstChild);
                }
            }
        });

        lucide.createIcons();

        // Collapse callouts
        Array.from(document.querySelectorAll(".callout.is-collapsible")).forEach((elem) => {
            elem.querySelector('.callout-title').addEventListener("click", (event) => {
                if (elem.classList.contains("is-collapsed")) {
                    elem.classList.remove("is-collapsed");
                } else {
                    elem.classList.add("is-collapsed");
                }
            });
        });
    });
</script>


<script src="https://fastly.jsdelivr.net/npm/force-graph@1.43.0/dist/force-graph.min.js"></script>

<script defer src="https://fastly.jsdelivr.net/npm/@alpinejs/persist@3.11.1/dist/cdn.min.js"></script>
<script src="https://fastly.jsdelivr.net/npm/alpinejs@3.11.1/dist/cdn.min.js" defer></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-okaidia.min.css" integrity="sha512-mIs9kKbaw6JZFfSuo+MovjU+Ntggfoj8RwAmJbVXQ5mkAX5LlgETQEweFPI18humSPHymTb5iikEOKWF7I8ncQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
<script src="https://fastly.jsdelivr.net/npm/whatwg-fetch@3.6.2/dist/fetch.umd.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<link href="/styles/digital-garden-base.css" rel="stylesheet">
    <link href="/styles/obsidian-base.css" rel="stylesheet">
    <link href="/styles/_theme.8f1d066a.css" rel="stylesheet">


<link href="/styles/custom-style.css" rel="stylesheet"><link href="/styles/user/pywrite.css" rel="stylesheet">
<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="manifest" href="/manifest.webmanifest">





<style></style>
    
      <script async src="https://soup.tawtaw.site/ramen" data-website-id="fa4f8c5b-4767-4821-b063-f62c4cb90223"></script>
    
    
  </head>
  <body class="theme-dark markdown-preview-view markdown-rendered markdown-preview-section ">
    
    
    
      
    <nav class="navbar">
        <div class="navbar-inner">
            <a href="/" style="text-decoration: none;">
                <h1 style="margin: 15px !important;">Pywrite Garden</h1>
            </a>
        </div>
        
    </nav>
    
    

    

    <main class="content cm-s-obsidian ">
      <header>
        
        <div class="header-meta">
          </div>
      
      
      </header>
      
      
      <p>using this <a href="http://www.ericdaugherty.com/dev/itunesexport/scala/" target="_blank" class="external-link">java</a>cli app, I'm able to convert playlists living in the <code>iTunes Library.xml</code> file into separate <code>*.m3u</code> playlist files</p>
<div class="callout " data-callout="info"><div class="callout-title"><div class="callout-title-inner"> New Apple Music App<br></div></div>
<div class="callout-content">
<p>
for those using the new Music app, check out <a class="internal-link" target="" data-note-icon="" href="/developer/MacOs/Apple Music Batch Playlist Export/">Apple Music Batch Playlist Export</a>. But you can still follow this method, but it assumes you export your library via &quot;File -&gt; Library -&gt; Export Library&quot; to generate the XML file</p>
</div></div>
<h2 id="convert-playlist-file-types" tabindex="-1">Convert playlist file types</h2>
<p>this is just a shell wrapper that runs the <code>itunesexport.jar</code> file downloaded from Eric's website</p>
<p><code>javacommand.sh</code></p>
<pre><code class="language-bash">#! /bin/bash

java -jar itunesexport.jar \
  -fileTypes=ALL -library=&quot;/mnt/octo8/jellyfin/media/iMusicLibrary/Library.xml&quot; \
  -outputDir=&quot;/mnt/octo8/jellyfin/media/iMusicLibrary/playlists&quot;  \
  -includePlaylist=&quot;\
    000_School_House_rock,\
	WERK_MUSIC,\
	white_kid_music,\
	shyGarage,\
	Nerd_Alert,\
  &quot; 
</code></pre>
<p>if coming from <strong>iTunes</strong> your file will be <code>iTunes Library.xml</code>. The default XML export from <strong>Apple Music</strong> is <code>Library.xml</code></p>
<h2 id="absolute-to-relative-paths" tabindex="-1">Absolute to Relative Paths</h2>
<p>The file paths to each song will be an absolute path from the host computer. Unless your 2nd machine's directories are set up exactly like the 1st, you'll want to edit the file paths so your new media machine can find the files</p>
<p><code>m3u-relativepaths.sh</code></p>
<pre><code class="language-bash">#! /bin/bash 

PLAYLIST_DIR=&quot;/Users/USERNAME/Downloads/playlists&quot;
ABSOLUTE_PATH=&quot;file:///Volumes/DRIVE/MUSIC_DIRECTORY&quot;

cd &quot;${PLAYLIST_DIR}&quot;
PLAYLISTS=(*.m3u)

for ((i=0; i&lt;${#PLAYLISTS[@]}; i++))
  do
	echo &quot;------- ${PLAYLISTS[$i]} ---------&quot; 
  
	### s| LOOK FOR | REPLACE WITH | g=find all instances
	LC_ALL=C  sed -i    &quot;s|${ABSOLUTE_PATH}|..|g&quot; &quot;${PLAYLIST_DIR}/${PLAYLISTS[$i]}&quot;

	echo &quot;<a class="internal-link is-unresolved" href="/404" target=""> SUCCESS! </a>&quot;
done

</code></pre>
<p>you'll want to edit 2 things on this file</p>
<ol>
<li>Two spots where you target your directory <code>/mnt/octo8/jellyfin/media/iMusicLibrary/playlists-m3u</code></li>
<li>Absolute path of 1st computer directory <code>file:///Volumes/DRIVE/MUSIC_DIRECTORY</code> is what is being replaced with  <code>..</code> to be a relative path. If your coming from Windows, it may look like <code>E:/MUSICLIBRARY</code></li>
</ol>
<p>Your iTunes folder will look like this</p>
<p><picture src="/img/user/attachments/iTunes-Directory-Tree.png" alt="attachments/iTunes-Directory-Tree.png|iTunes-Directory-Tree"><source       media="(max-width:480px)"
      srcset="/img/optimized/gaB9ZvAHef-241.webp"
      type="image/webp"
      >
      <source       media="(max-width:480px)"
      srcset="/img/optimized/gaB9ZvAHef-241.jpeg"
      >
      <img       class=""
      src="/img/user/attachments/iTunes-Directory-Tree.png"
      alt="attachments/iTunes-Directory-Tree.png|iTunes-Directory-Tree"
      width=""
      ></picture></p>
<p>I created another folder <code>playlists</code> that will house all my new <code>.m3u</code> files. And that relative path <code>../</code> will start looking for songs one directory above the <code>playlists</code> folder</p>
<p>Replace <code>USERNAME</code> &amp; <code>DRIVE</code> with paths that are unique to your machine. Also, this assumes <code>/Volumes/DRIVE</code> won't clash with any of your music's file structure i.e. <em>artist</em>, <em>album</em> or <em>filename</em> that may have <code>/Volumes/DRIVE</code>. If in your library the rock band <a href="https://volumesofficial.com/" target="_blank" class="external-link">Volumes</a>may have an album titled the same as your drive's name. Very unlikely, but if it did happen, it would replace that text and break the path.</p>
<p>Notice how I replace the <em>absolute path</em> with a <code>..</code>. This is because I nest the <code>.m3u</code> files in it's own <code>playlist</code> folder. Think of it as, the path to where the <code>.m3u</code> lives, it must go up one directory so it can see the <code>./iTunes Media/Music/...</code> library.</p>
<h2 id="import-to-jellyfin" tabindex="-1">Import to Jellyfin</h2>
<p>I use <a class="internal-link" target="" data-note-icon="" href="/developer/Home Lab/Jellyfin/">Jellyfin</a> as my online music manager. Note that this is a one way sync. All songs and playlists must be added and edited with <strong>iTunes</strong> and then updated to Jellyfin.</p>
<p>Cool thing about <strong>Jellyfin</strong> is that plopping <code>.m3u</code> files into the imported library will auto find and add those playlists to the frontend. Just make sure those relative paths are GOOD</p>
<h2 id="phone" tabindex="-1">Phone</h2>
<p>I use <a href="https://www.symfonium.app/" target="_blank" class="external-link">Symfonium</a>as my phone's dedicated music player. It cost <strong>$5</strong>, and that's fine because it is very feature rich (Android Auto, auto sync, Offline downloads, etc). If you're looking for something light weight (and <a class="internal-link" target="" data-note-icon="" href="/developer/FOSS/">FOSS</a>) check out <a href="https://github.com/jmshrv/finamp" target="_blank" class="external-link">jmshrv/finamp: A Jellyfin music client for mobile (github.com)</a></p>
<h2 id="improvements" tabindex="-1">Improvements</h2>
<p>With the new Apple Music app, you still have to manually go through and &quot;File -&gt; Library -&gt; Export Library&quot; anytime you make changes. I'm sure I could run an <code>.applescript</code> to do this regularly, but for now I'll do a few clicks</p>
<p>How do I get my music files from laptop to server? With <a class="internal-link" target="" data-note-icon="" href="/developer/Home Lab/FreeFileSync/">FreeFileSync</a>. Maybe in the future I'll just use <a class="internal-link" target="" data-note-icon="" href="/developer/Linux/rsync/">rsync</a>.</p>
<div class="callout " data-callout="note"><div class="callout-title"><div class="callout-title-inner"> Ignore Folders<br></div></div>
<div class="callout-content">
<p>
Don't forget to ignore the <code>*/playlists</code> folder during this sync as you don't want to overwrite those <code>.m3u</code> files</p>
</div></div>
<hr>
<h2 id="credits" tabindex="-1">Credits</h2>
<ul>
<li><a href="https://support.symfonium.app/t/import-sync-media-providers-playlists/325" target="_blank" class="external-link">Import / Sync media providers playlists - Wiki - Symfonium support</a></li>
<li><a href="http://www.ericdaugherty.com/dev/itunesexport/scala/" target="_blank" class="external-link">http://www.ericdaugherty.com/dev/itunesexport/scala/</a></li>
<li><a href="https://github.com/jasmith79/playlistrs/issues/3" target="_blank" class="external-link">Where is Apple's new &quot;Music app&quot; xml file location? · Issue <a class="tag" onclick="toggleTagSearch(this)" data-content="#3">#3</a> · jasmith79/playlistrs (github.com)</a></li>
</ul>
<h2 id="index" tabindex="-1">index</h2>
<ul>
<li><a class="internal-link is-unresolved" href="/404" target="">music box</a></li>
<li><a class="internal-link is-unresolved" href="/404" target="">developer_box📦</a></li>
</ul>

      
      
    </main>

    

    
        <script>
      if (window.location.hash) {
        document.getElementById(window.location.hash.slice(1)).classList.add('referred');
      }
      window.addEventListener('hashchange', (evt) => {
        const oldParts = evt.oldURL.split("#");
        if (oldParts[1]) {
          document.getElementById(oldParts[1]).classList.remove('referred');
        }
        const newParts = evt.newURL.split("#");
        if (newParts[1]) {
          document.getElementById(newParts[1]).classList.add('referred');
        }
      }, false);
      const url_parts = window.location.href.split("#")
      const url = url_parts[0];
      const referrence = url_parts[1];
      document.querySelectorAll(".cm-s-obsidian > *[id]").forEach(function (el) {
        el.ondblclick = function(evt) {
          const ref_url = url + '#' + evt.target.id
          navigator.clipboard.writeText(ref_url);
      }
      });

      
    </script>
    <script src=" https://fastly.jsdelivr.net/npm/luxon@3.2.1/build/global/luxon.min.js "></script>
<script defer>
    TIMESTAMP_FORMAT = "MMM dd, yyyy h:mm a";
    document.querySelectorAll('.human-date').forEach(function (el) {
        el.innerHTML = luxon.DateTime.fromISO(el.getAttribute('data-date') || el.innerText).toFormat(TIMESTAMP_FORMAT);
      });
</script>
    
    
    <script>
lucide.createIcons({
            attrs: {
                class: ["svg-icon"]
            }
        });
</script>
  </body>
</html>
