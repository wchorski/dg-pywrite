<!DOCTYPE html>
<html lang="en">
  <head>
    <title>React Global Context Provider</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<script src="https://fastly.jsdelivr.net/npm/mermaid@9.4.0/dist/mermaid.min.js"></script>
<script>
    mermaid.initialize({
        startOnLoad: true,
    });
</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/prism.min.js" integrity="sha512-hpZ5pDCF2bRCweL5WoA0/N1elet1KYL5mx3LP555Eg/0ZguaHawxNvEjF6O3rufAChs16HVNhEc6blF/rZoowQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/plugins/autoloader/prism-autoloader.min.js" integrity="sha512-sv0slik/5O0JIPdLBCR2A3XDg/1U3WuDEheZfI/DI5n8Yqc3h5kjrnr46FGBNiUAJF7rE4LHKwQ/SoSLRKAxEA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://cdn.jsdelivr.net/npm/lucide@0.115.0/dist/umd/lucide.min.js"></script>
<script>
    // Create callout icons
    window.addEventListener("load", () => {
        document.querySelectorAll(".callout").forEach((elem) => {
            const icon = getComputedStyle(elem).getPropertyValue('--callout-icon');
            const iconName = icon && icon.trim().replace(/^lucide-/, "");

            if (iconName) {
                const calloutTitle = elem.querySelector(".callout-title");

                if (calloutTitle) {
                    const calloutIconContainer = document.createElement("div");
                    const calloutIcon = document.createElement("i");

                    calloutIconContainer.appendChild(calloutIcon);
                    calloutIcon.setAttribute("icon-name", iconName);
                    calloutIconContainer.setAttribute("class", "callout-icon");
                    calloutTitle.insertBefore(calloutIconContainer, calloutTitle.firstChild);
                }
            }
        });

        lucide.createIcons();

        // Collapse callouts
        Array.from(document.querySelectorAll(".callout.is-collapsible")).forEach((elem) => {
            elem.querySelector('.callout-title').addEventListener("click", (event) => {
                if (elem.classList.contains("is-collapsed")) {
                    elem.classList.remove("is-collapsed");
                } else {
                    elem.classList.add("is-collapsed");
                }
            });
        });
    });
</script>


<script src="https://fastly.jsdelivr.net/npm/force-graph@1.43.0/dist/force-graph.min.js"></script>

<script defer src="https://fastly.jsdelivr.net/npm/@alpinejs/persist@3.11.1/dist/cdn.min.js"></script>
<script src="https://fastly.jsdelivr.net/npm/alpinejs@3.11.1/dist/cdn.min.js" defer></script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.25.0/themes/prism-okaidia.min.css" integrity="sha512-mIs9kKbaw6JZFfSuo+MovjU+Ntggfoj8RwAmJbVXQ5mkAX5LlgETQEweFPI18humSPHymTb5iikEOKWF7I8ncQ==" crossorigin="anonymous" referrerpolicy="no-referrer">
<script src="https://fastly.jsdelivr.net/npm/whatwg-fetch@3.6.2/dist/fetch.umd.min.js" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<link href="/styles/digital-garden-base.css" rel="stylesheet">
    <link href="/styles/style.css" rel="stylesheet">


<link href="/styles/custom-style.css" rel="stylesheet"><link href="/styles/user/pywrite.css" rel="stylesheet">
<link rel="icon" href="/favicon.ico" sizes="any">
<link rel="icon" href="/favicon.svg" type="image/svg+xml">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="manifest" href="/manifest.webmanifest">





<style></style>
    
      <script async src="https://soup.tawtaw.site/ramen" data-website-id="fa4f8c5b-4767-4821-b063-f62c4cb90223"></script>
    
    
  </head>
  <body class="theme-dark markdown-preview-view markdown-rendered markdown-preview-section ">
    
    
    
      
    <nav class="navbar">
        <div class="navbar-inner">
            <a href="/" style="text-decoration: none;">
                <h1 style="margin: 15px !important;">Digital Garden</h1>
            </a>
        </div>
        
    </nav>
    
    

    

    <main class="content cm-s-obsidian ">
      <header>
        
        <div class="header-meta">
          </div>
      
      
      </header>
      
      
      <p>A snippet for using a virtual authorization context. Using it as a way to check for login isn't the most practical use case (when you'll probably use tokens, cookies, etc.) but hopefully this example still gets the point across of how to use <strong>React's</strong> <code>createContext</code></p>
<div class="callout " data-callout="warning"><div class="callout-title"><div class="callout-title-inner"> This does not persist when browser is refreshed</div></div>
<div class="callout-content">
<p>
</p></div></div>
<p><code>useGlobalContext.tsx</code></p>
<pre><code class="language-tsx">
import { createContext, useContext, useState } from &quot;react&quot;;

interface DataType {
  id: string | null,
  email: string | null,
  name: string | null,
  isAdmin: boolean | null,
}

const defaultCtx= {
  session:{
    id: '',
    email: '',
    name: '',
    isAdmin: false,
  },
  setSession: (session:DataType | null) =&gt; {}
}

const GlobalContext = createContext(defaultCtx)

export const GlobalContextProvider = ({ children }: {children: React.ReactNode}) =&gt; {

  const [session, setSession] = useState(null);
  
  return (
    &lt;GlobalContext.Provider value={{session, setSession}}&gt;
      {children}
    &lt;/GlobalContext.Provider&gt;
  )
};

export const useGlobalContext = () =&gt; useContext(GlobalContext);
</code></pre>
<p>don't forget to wrap your app</p>
<p><code>_app.tsx</code></p>
<pre><code class="language-tsx">// import '../styles/globals.css'
import type { AppProps } from 'next/app'
import Page from &quot;../components/Page&quot;;
import dynamic from 'next/dynamic';
import { GlobalStyles } from &quot;../styles/GlobalThemeStyle.styled.js&quot;;
import { ApolloProvider } from &quot;@apollo/client&quot;;

import '../styles/nprogress.css'
import { GlobalContextProvider } from '../lib/useGlobalContext';



function App({ Component, pageProps }: any) {

  return (&lt;&gt;

    &lt;GlobalContextProvider&gt;

		&lt;Component {...pageProps} /&gt;

    &lt;/GlobalContextProvider&gt;
  &lt;/&gt;)
}

export default (App)
</code></pre>
<hr>
<h2 id="credits" tabindex="-1">Credits</h2>
<ul>
<li><a href="https://github.com/pagecow/nextjs-13-context-api/blob/main/app/Context/store.tsx" target="_blank" class="external-link">https://github.com/pagecow/nextjs-13-context-api/blob/main/app/Context/store.tsx</a></li>
<li><a href="https://felixgerschau.com/react-typescript-context/" target="_blank" class="external-link">https://felixgerschau.com/react-typescript-context/</a></li>
<li><a href="https://stackoverflow.com/questions/58193424/passing-state-with-usecontext-in-typescript" target="_blank" class="external-link">https://stackoverflow.com/questions/58193424/passing-state-with-usecontext-in-typescript</a></li>
</ul>
<h2 id="backlinks" tabindex="-1">Backlinks</h2>
<ul>
<li><a class="internal-link" target="" data-note-icon="" href="/developer/ReactJS/ReactJS/">developer/ReactJS/ReactJS</a></li>
</ul>

      
      
    </main>

    

    
        <script>
      if (window.location.hash) {
        document.getElementById(window.location.hash.slice(1)).classList.add('referred');
      }
      window.addEventListener('hashchange', (evt) => {
        const oldParts = evt.oldURL.split("#");
        if (oldParts[1]) {
          document.getElementById(oldParts[1]).classList.remove('referred');
        }
        const newParts = evt.newURL.split("#");
        if (newParts[1]) {
          document.getElementById(newParts[1]).classList.add('referred');
        }
      }, false);
      const url_parts = window.location.href.split("#")
      const url = url_parts[0];
      const referrence = url_parts[1];
      document.querySelectorAll(".cm-s-obsidian > *[id]").forEach(function (el) {
        el.ondblclick = function(evt) {
          const ref_url = url + '#' + evt.target.id
          navigator.clipboard.writeText(ref_url);
      }
      });

      
    </script>
    <script src=" https://fastly.jsdelivr.net/npm/luxon@3.2.1/build/global/luxon.min.js "></script>
<script defer>
    TIMESTAMP_FORMAT = "MMM dd, yyyy h:mm a";
    document.querySelectorAll('.human-date').forEach(function (el) {
        el.innerHTML = luxon.DateTime.fromISO(el.getAttribute('data-date') || el.innerText).toFormat(TIMESTAMP_FORMAT);
      });
</script>
    
    
    <script>
lucide.createIcons({
            attrs: {
                class: ["svg-icon"]
            }
        });
</script>
  </body>
</html>
