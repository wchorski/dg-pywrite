<p>This is more Apollo related, but [[developer/KeystoneJS/KeystoneJS|developer/KeystoneJS/KeystoneJS]] is built ontop so still is relevant</p>
<p>creating a search filter that is not case sensitive was a nightmare to solve. Here I'll layout the Apollo Sandbox queries that I contstructed as an example</p>
<h2 id="operation" tabindex="-1">Operation</h2>
<pre><code class="language-gql">query Products($where: ProductWhereInput!) {
  products(where: $where) {
    name
    description
  }

}
</code></pre>
<h2 id="variables" tabindex="-1">Variables</h2>
<pre><code class="language-json">{
  &quot;where&quot;: {
    &quot;OR&quot;: [
      {
        &quot;name&quot;: {
          &quot;contains&quot;: &quot;pear&quot;,
          &quot;mode&quot;: &quot;insensitive&quot;
        }
      },
      {
        &quot;description&quot;: {
          &quot;mode&quot;: &quot;insensitive&quot;,
          &quot;contains&quot;: &quot;pear&quot;
        }
      }
    ]
  },

}
</code></pre>
<p>Here I'm searching all of the <strong>Products</strong> in my database. I'm looking for any <em>Product Name</em> or <em>Product Description</em> that has the searchterm &quot;pear&quot;.</p>
<p>Here is a more complex example that also evaluates tags and category names</p>
<h2 id="operation-v2" tabindex="-1">Operation v2</h2>
<pre><code class="language-gql">query Products($whereProduct: ProductWhereInput!) {
  products(where: $whereProduct) {
    name
    description
    id
    price
    photo {
      altText
      image {
        url
        width
        height
      }
    }
  }
}
</code></pre>
<h2 id="variables-v2" tabindex="-1">Variables v2</h2>
<pre><code class="language-json">{
	whereProduct: {
		OR: [
			{
				name: {
					contains: inputValue,
					mode: 'insensitive'
				}
			},
			{
				description: {
					contains: inputValue,
					mode: 'insensitive',
				}
			},
			{
				tags: {
					every: {
						name: {
							contains: inputValue,
							mode: 'insensitive'
						}
					}
				}
			},
			{
				categories: {
					every: {
						name: {
							contains: inputValue,
							mode: 'insensitive'
						}
					}
				}
			}
		]
	}
}
</code></pre>
