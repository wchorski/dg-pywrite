<p>migrating an existing [[PostGres|PostGres]] database with the [[developer/KeystoneJS/KeystoneJS|developer/KeystoneJS/KeystoneJS]] ORM takes a bit of doc reading. Essentially mashing the <a href="https://keystonejs.com/docs/guides/cli" target="_blank" class="external-link">Command Line - Keystone 6 Docs</a> and [[<a href="https://www.prisma.io/docs/guides/migrate/developing-with-prisma-migrate/add-prisma-migrate-to-a-project#introspect-to-create-or-update-your-prisma-schema%5C%7Chttps://www.prisma.io/docs/guides/migrate/developing-with-prisma-migrate/add-prisma-migrate-to-a-project#introspect-to-create-or-update-your-prisma-schema" target="_blank" class="external-link">https://www.prisma.io/docs/guides/migrate/developing-with-prisma-migrate/add-prisma-migrate-to-a-project#introspect-to-create-or-update-your-prisma-schema\|https://www.prisma.io/docs/guides/migrate/developing-with-prisma-migrate/add-prisma-migrate-to-a-project#introspect-to-create-or-update-your-prisma-schema</a>]] articles together</p>
<p>while in the <code>./backend</code> keystonejs root directory</p>
<pre><code class="language-bash">mkdir -p migrations/0_init
</code></pre>
<pre><code class="language-bash">npx prisma migrate diff \
--from-empty \
--to-schema-datamodel schema.prisma \
--script &gt; migrations/0_init/migration.sql
</code></pre>
<pre><code class="language-bash">npx prisma migrate resolve --applied 0_init
</code></pre>
<p>run below command to double check</p>
<pre><code class="language-bash">yarn keystone build &amp;&amp; keystone prisma migrate deploy
</code></pre>
<h2 id="file-tree-for-reference" tabindex="-1">File tree for reference</h2>
<pre><code>.
├── Dockerfile
├── README.md
├── access.ts
├── auth.ts
├── crontab
│   └── subscription_cron.ts
├── keystone.ts
├── migrations
│   └── 0_initial
				migration.sql &lt;---- ** here
├── mutations
│   ├── addToCart.ts
│   ├── checkout.ts
│   ├── contact.ts
│   └── sampleMutation.ts
├── package.json
├── prepareToUpload.ts
├── public
│   ├── assets
│   ├── seedfiles
│   └── styles
├── schema.graphql
├── schema.prisma
├── schema.ts
├── schemas
├── tsconfig.json
├── types.ts
└── yarn.lock
</code></pre>
<h2 id="still-not-working" tabindex="-1">Still not working</h2>
<div class="callout " data-callout="warning"><div class="callout-title"><div class="callout-title-inner"> problem<br></div></div>
<div class="callout-content">
<p>
Still having problems with this build. For now I connect my <strong>dev app environment</strong> with my <strong>production database</strong> and run <code>yarn dev</code> to update the schema, probably not a good idea but it's what works for now</p>
</div></div>
