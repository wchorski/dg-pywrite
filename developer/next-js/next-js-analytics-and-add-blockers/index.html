<p>I want to make sure I get session data from my users even if they have an add blocker. To do this I just need to create a proxy in the <code>next.config.js</code> that routes my analytics data as if it's from the same domain</p>
<h2 id="next-config-js" tabindex="-1">next.config.js</h2>
<pre><code class="language-js">/** @type {import('next').NextConfig} */

const ANALYTICS_URL = process.env.NEXT_PUBLIC_UMAMI_URL + '/:match*'
console.log('ANALYTICS_URL', ANALYTICS_URL);

const nextConfig = {
  reactStrictMode: true,
  swcMinify: true,
  async rewrites() {
    return [
      {
        source: '/stats/:match*',
        destination: ANALYTICS_URL,
      },
    ]
  },
}

module.exports = nextConfig
</code></pre>
<p>I first tried this out on my [[developer/Projectsüìê/Make-a-Gram|developer/Projectsüìê/Make-a-Gram]] project</p>
<hr>
<h2 id="credits" tabindex="-1">Credits</h2>
<ul>
<li>[[<a href="http://nextjs.org" target="_blank" class="external-link">nextjs.org</a>)](<a href="https://nextjs.org/docs/api-reference/next.config.js/rewrites%5C%7Cnext.config.js:" target="_blank" class="external-link">https://nextjs.org/docs/api-reference/next.config.js/rewrites\|next.config.js:</a> Rewrites ]]</li>
<li><a href="https://blog.logrocket.com/how-to-use-proxy-next-js/" target="_blank" class="external-link">How to use a proxy in Next.js - LogRocket Blog</a></li>
<li><a href="https://umami.is/docs/running-on-vercel" target="_blank" class="external-link">Running on Vercel | umami</a></li>
</ul>
<h2 id="backlinks" tabindex="-1">Backlinks</h2>
<ul>
<li>[[developer/Home Lab üè†/NextJS|developer/Home Lab üè†/NextJS]]</li>
</ul>
