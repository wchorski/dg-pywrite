<pre><code class="language-tsx">import React, { Fragment } from 'react';
import type { GetStaticPathsResult, GetStaticPropsContext } from 'next';
import Link from 'next/link';
import type { DocumentRendererProps } from '@keystone-6/document-renderer';
import { InferRenderersForComponentBlocks } from '@keystone-6/fields-document/component-blocks';
import { DocumentRenderer } from '@keystone-6/document-renderer';
import { fetchGraphQL, gql } from '../../graphql';
import { BlockRenderer } from '../../components/blocks/BlocksRenderer';

export type DocumentProp = DocumentRendererProps['document'];

type Post = {
  id: string;
  title: string;
  slug: string;
  publishDate: string | null;
  author: {
    name: string;
  } | null;
  content: {
    document: DocumentProp;
  };
};

export default function BlogPage({ post, error }: { post: Post | undefined; error?: Error }) {
  if (error) {
    return (
      &lt;&gt;
        &lt;h1&gt;Something went wrong&lt;/h1&gt;
        &lt;pre&gt;{error.message}&lt;/pre&gt;
      &lt;/&gt;
    );
  }

  if (!post) {
    return &lt;div&gt;Post not found&lt;/div&gt;;
  }

  return (
    &lt;&gt;
      &lt;div&gt;
        &lt;Link href=&quot;/&quot;&gt;&amp;larr; back home&lt;/Link&gt;
      &lt;/div&gt;

      &lt;article&gt;

        &lt;h1&gt;{post.title}&lt;/h1&gt;

        &lt;p&gt;
          {post.publishDate ? (
            &lt;span&gt;
              &lt;em&gt;Published on {new Date(post.publishDate).toLocaleDateString()}&lt;/em&gt;
            &lt;/span&gt;
          ) : null}
          {post.author?.name ? (
            &lt;span&gt;
              &lt;em&gt; Â· by {post.author?.name}&lt;/em&gt;
            &lt;/span&gt;
          ) : null}
        &lt;/p&gt;

        &lt;BlockRenderer document={post.content.document} /&gt;
        {/* &lt;DocumentRenderer document={post.content.document} /&gt; */}

      &lt;/article&gt;

    &lt;/&gt;
  )
}

export async function getStaticPaths(): Promise&lt;GetStaticPathsResult&gt; {
  try {
    const data = await fetchGraphQL(gql`
      query posts {
        posts {
          slug
        }
      }
    `);


    const posts: { slug: string }[] = data?.posts || [];
    const paths = posts.map(({ slug }) =&gt; ({
      params: { slug },
    }));

    return {
      paths,
      fallback: false,
    };
  } catch (e) {
    return {
      paths: [],
      fallback: false,
    };
  }
}

export async function getStaticProps({ params = {} }: GetStaticPropsContext) {
  const slug = params.slug;

  try {
    const data = await fetchGraphQL(
      gql`
        query post($slug: String!) {
          post(where: { slug: $slug }) {
            id
            title
            slug
            featured_image
            featured_video
            status
            template
            dateCreated
            dateModified
            categories {
              name
              id
            }
            tags {
              name
              id
            }
            author {
              name
            }
            content {
              document
            }
          }
        }
      `,
      {
        slug,
      }
    );

    const post = data?.post;

    return { props: { post } };
  } catch (e) {
    console.log('&gt;-------- ERRROR');
    return {
      props: {
        post: { id: '123', title: 'thie title' },
        error: { name: (e as Error).name, message: (e as Error).message },
      },
    };
  }
}
</code></pre>
