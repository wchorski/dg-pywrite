<p>I'm integrating a shopping cart into my [[developer/ReactJS/ReactJS|developer/ReactJS/ReactJS]] app. For modern user experience, I want the side cart to close if the user clicks off of the cart menu.</p>
<p>The solution was to use React's [[[useCallback â€“ React](<a href="https://react.dev/reference/react/useCallback%5C%7CuseCallback" target="_blank" class="external-link">https://react.dev/reference/react/useCallback\|useCallback</a> Hook]]) with a global context boolean</p>
<pre><code class="language-tsx">const [toggleNav, setToggleNav] = useState(false);
  const mobileMenuRef = useRef();

  const closeOpenMenus = useCallback(
    (e) =&gt; {
      if (
        mobileMenuRef.current &amp;&amp;
        toggleNav &amp;&amp;
        !mobileMenuRef.current.contains(e.target)
      ) {
        setToggleNav(false);
      }
    },
    [toggleNav]
  );

  useEffect(() =&gt; {
    document.addEventListener(&quot;mousedown&quot;, closeOpenMenus);
  }, [closeOpenMenus]);

	return (
		&lt;nav
			ref={mobileMenuRef}
		&gt; 							
			&lt;button&gt;
				close menu
			&lt;/button&gt;
			...the_menu
		&lt;/nav&gt;
	)
</code></pre>
<hr>
<h2 id="credits" tabindex="-1">Credits</h2>
<ul>
<li><a href="https://stackoverflow.com/a/75477643/15579591" target="_blank" class="external-link">Kamen Kanchev</a></li>
</ul>
