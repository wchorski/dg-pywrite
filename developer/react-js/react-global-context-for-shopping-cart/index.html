<p>here is a quick example of using global context for</p>
<ul>
<li>opening / closing cart drawer</li>
<li>cart item contents for the user</li>
</ul>
<pre><code class="language-tsx">'use client'
import { CartItem, User } from &quot;@ks/types&quot;;
import { client } from &quot;@lib/request&quot;;
import { gql } from &quot;graphql-request&quot;;
import { ReactNode, createContext, useContext, useState } from &quot;react&quot;;

const defaultCtx= {
  isOpen: false,
  setIsOpen: (isOpen:boolean) =&gt; {},
  toggleCart: () =&gt; {},
  closeCart: () =&gt; {},
  openCart: () =&gt; {},

  cartItems: [],
  setCartItems: (cartItems:CartItem[]) =&gt; [],
  addToCart: (cartItem:CartItem) =&gt; {},
  removeFromCart: (id:string) =&gt; {},
  getUserCart: (sessionId:string) =&gt; {},
}

const LocalStateContext = createContext(defaultCtx)

function CartStateProvider ({children}:{children: ReactNode}){

  const [isOpen, setIsOpen] = useState&lt;boolean&gt;(false)
  const [cartItems, setCartItems] = useState&lt;CartItem[]&gt;([])

  // function addToCart(cartItem:CartItem){
  //   console.log('add to cart');
    
  //   console.log({cartItem});
  //   setCartItems(prev =&gt; [...prev, cartItem])
  // }

  async function getUserCart(sessionId:string){
    const variables = {
      where: {
        id: sessionId
      }
    }

    try {
      const { user } = await client.request(query, variables) as { user:User }
      // console.log(user.cart);

      if(!user.cart) return console.log('cart not found');
      
      // setCart(user.cart)
      setCartItems(user.cart)
      
      
    } catch (error) {
      console.log('!!! getusercart: ', error);
      
    }
  }

  function removeFromCart(id:string){
    console.log('remove from cart');
    console.log({id});
    const updatedItems = cartItems.filter(item =&gt; item.id !== id);
    setCartItems(updatedItems)
  }

  function toggleCart() {
    setIsOpen(!isOpen)
  }
  function closeCart() {
    setIsOpen(false)
  }
  function openCart() {
    setIsOpen(true)
  }

  return(
    &lt;LocalStateContext.Provider 
      value={{
        isOpen, 
        setIsOpen, 
        toggleCart, 
        closeCart, 
        openCart,
        cartItems,
        setCartItems,
        getUserCart,
        removeFromCart,
      }}
    &gt;
      {children}
    &lt;/LocalStateContext.Provider&gt;
  )
} 

function useCart(){
  const all = useContext(LocalStateContext)
  return all
}
export {CartStateProvider, useCart}

const query = gql`
  query getUserCart($where: UserWhereUniqueInput!) {
    user(where: $where) {
      cart {
        id
        quantity
        product {
          id
          price
          name
          image
        }
      }
    }
  }
`
</code></pre>
