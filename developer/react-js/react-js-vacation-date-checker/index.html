<p>I wanted to build a date picker that checks against an array of vacation days. The logic is vanilla #javascript and even uses the built in API <code>.toLocalDateString</code> for pretty formatting.</p>
<h2 id="availability-checker-tsx" tabindex="-1">AvailabilityChecker.tsx</h2>
<pre><code class="language-tsx">import { useRef, useState } from &quot;react&quot;;
import { dateCheckAvailable } from &quot;../../libs/dateCheck&quot;;

type FormVals = {
  date: string,
  durationInHours: string,
}

const vacationDays = [
  {
    dateTime: &quot;2023-05-01T05:00:00Z&quot;,
    durationInHours: &quot;24&quot;
  },
  {
    dateTime: &quot;2023-05-02T05:00:00Z&quot;,
    durationInHours: &quot;12&quot;
  },
  {
    dateTime: &quot;2023-06-01T05:00:00Z&quot;,
    durationInHours: &quot;24&quot;
  },
  {
    dateTime: &quot;2023-06-02T05:00:00Z&quot;,
    durationInHours: &quot;24&quot;
  },
  {
    dateTime: &quot;2023-06-03T05:00:00Z&quot;,
    durationInHours: &quot;24&quot;
  },
];

export function AvailabilityChecker() {

  const inputRangeRef = useRef&lt;HTMLInputElement&gt;(null)
  const [hoursSliderVal, setHoursSliderVal] = useState('.25')
  const [message, setMessage] = useState(&quot;&quot;);
  const [formValues, setformValues] = useState&lt;FormVals&gt;({
    date: '',
    durationInHours: '',
  });

  function handleSubmit(e:any) {
    e.preventDefault();
    const { date, durationInHours} = formValues
    // console.table(formValues)
    if(!durationInHours.match(/^[0-9]+(\.[0-9]+)?$/)) return setMessage('Hours must only contain numbers &quot;0-9&quot; and one decimal &quot;.&quot; ')
    
    dateCheckAvailable(date, durationInHours, vacationDays)
      ? setMessage('Date is Available')
      : setMessage('CONFLICT was found');
  }

  const handleChange = (event:any) =&gt; {
    setformValues({ ...formValues, [event.target.name]: event.target.value });
  }


  return (
    &lt;div className=&quot;App&quot;&gt;
      &lt;h1&gt; Does date picked overlap vacation date? &lt;/h1&gt;

      &lt;section&gt;
        &lt;h2&gt;Vacation Days&lt;/h2&gt;
        &lt;ul className=&quot;vacation-days&quot;&gt;
          {vacationDays.map((day) =&gt; (
            &lt;li key={day.dateTime}&gt;
              {prettyDate(day.dateTime)} &lt;br /&gt;
              {day.durationInHours} hours 
            &lt;/li&gt;
          ))}
        &lt;/ul&gt;
      &lt;/section&gt;

      &lt;section&gt;
        &lt;form onSubmit={handleSubmit} className=&quot;date-picker&quot;&gt;
          &lt;label&gt;
            Date Picked
            &lt;input type=&quot;datetime-local&quot; name=&quot;date&quot; value={formValues.date} onChange={handleChange} required/&gt;
          &lt;/label&gt;
          &lt;br /&gt;

          &lt;label&gt;
            Duration in Hours
            &lt;input type=&quot;range&quot; min={.25} max={24} step={.25} name=&quot;durationInHours&quot; value={formValues.durationInHours} required ref={inputRangeRef} 
              onChange={(e) =&gt; {
                handleChange(e)
                setHoursSliderVal(String(e.target.value))
              }}
            /&gt;
            &lt;span&gt;{hoursSliderVal} hours &lt;/span&gt;
          &lt;/label&gt;
          &lt;br /&gt;

          &lt;button type=&quot;submit&quot;&gt;check date&lt;/button&gt;
        &lt;/form&gt;
      &lt;/section&gt;

      &lt;p&gt;Message: {message}&lt;/p&gt;
    &lt;/div&gt;
  );
}


function prettyDate(dateISO:string){

  const realDate = new Date(dateISO)

  return realDate.toLocaleDateString('en-US', 
    {
      month: 'long',
      day: 'numeric',
      year: 'numeric',
      hour: 'numeric',
      minute: 'numeric'
      // daySuffix: 'ordinal'
    }
  )
}
</code></pre>
<h2 id="date-check-ts" tabindex="-1">dateCheck.ts</h2>
<pre><code class="language-ts">type VacayDay = {
  dateTime: string,
  durationInHours: string,
}

export function dateCheckAvailable(selectedDateTime:string, durationInHours:string, vacationDays:VacayDay[]) {

  const selectedStart = new Date(selectedDateTime)
  const durationMs = Number(durationInHours) * 60 * 60 * 1000
  const selectedEnd = new Date(selectedStart.getTime() + durationMs)

  for (let i = 0; i &lt; vacationDays.length; i++) {

    const vacationStart = new Date(vacationDays[i].dateTime);
    const vacationEnd = new Date(vacationStart.getTime() + Number(vacationDays[i].durationInHours) * 60 * 60 * 1000)

    if (selectedEnd &lt;= vacationStart || selectedStart &gt;= vacationEnd) {
      console.log('the selected date time and the vacation day do not overlap')
      continue;
    } else {
      
      console.log('the selected date time and the vacation day overlap')
      return false;
    }
  }

  console.log('no vacation day overlaps with selected date')
  return true; // no vacation day overlaps with selected date
}

</code></pre>
