<h2 id="custom-hook" tabindex="-1">Custom Hook</h2>
<p><code>lib/useStyleTransition.tsx</code></p>
<pre><code class="language-jsx">import { useEffect, useState } from &quot;react&quot;

const STATE = {
  ENTERING: 'entering',
  ENTERED: 'entered',
  EXITING: 'exiting',
  EXITED: 'exit',
}

function useTransitionState(duration = 1000) {

  const [state, setState] = useState&lt;string&gt;()

  useEffect(() =&gt; {
    let timerId: any

    if (state === STATE.ENTERING) {
      timerId = setTimeout(() =&gt; setState(STATE.ENTERED), duration)
    } else if (state === STATE.EXITING) {
      timerId = setTimeout(() =&gt; setState(STATE.EXITED), duration)
    }

    return () =&gt; timerId &amp;&amp; clearTimeout(timerId)

  }, [state, setState])


  return [state, setState]
}

export function useStyleTransitionControl(duration: number) {
  const [state, setState] = useTransitionState(duration)

  const enter = () =&gt; {
    if (state !== STATE.EXITING) {
      setState(STATE.ENTERING)
    }
  }

  const exit = () =&gt; {
    if (state !== STATE.ENTERING) {
      setState(STATE.EXITING)
    }
  }

  return [state, enter, exit]
}
</code></pre>
<h2 id="rendered-component" tabindex="-1">Rendered Component</h2>
<p><code>EmojiFade.tsx</code></p>
<pre><code class="language-jsx">import { useStyleTransitionControl } from &quot;../../lib/useStyleTransition&quot;
import { useState } from &quot;react&quot;

const defaultStyle = {
  transition: 'opacity 3000ms ease-in-out',
  opacity: 0,
}

const transitionStyles = {
  entering: { opacity: 1 },
  entered: { opacity: 1 },
  exiting: { opacity: 0 },
  exited: { opacity: 0 },
}

export function EmojiFade() {

  const [state, enter, exit] = useStyleTransitionControl()
  const [isOpen, setIsOpen] = useState(false)

  const style = {
    ...defaultStyle,
    ...transitionStyles[state] ?? {}
  }

  return (
    &lt;StyledEmoji open={isOpen}&gt;
      State: {state}

      &lt;div style={style} &gt; 
        &lt;span role=&quot;img&quot; aria-label=&quot;fading emoji&quot;&gt; üê∏ &lt;/span&gt;
      &lt;/div&gt;

      &lt;button onClick={enter}&gt;
        Enter
      &lt;/button&gt;

      &lt;button onClick={exit}&gt;
        Exit
      &lt;/button&gt;

    &lt;/StyledEmoji&gt;
  )
}


</code></pre>
<hr>
<h2 id="credits" tabindex="-1">Credits</h2>
<ul>
<li><a href="https://javascript.plainenglish.io/applying-css-transitions-with-react-hooks-7bd84671bc6b" target="_blank" class="external-link">Applying CSS Transitions with React Hooks | by Kaylie Kwon | JavaScript in Plain English</a></li>
</ul>
<h2 id="backlinks" tabindex="-1">Backlinks</h2>
<ul>
<li>[[developer/ReactJS/ReactJS|developer/ReactJS/ReactJS]]</li>
</ul>
